# ABOUTME: XcodeGen project specification for epub-audiobook.
# ABOUTME: Generates epub-audiobook.xcodeproj with app, test, and UI test targets.

name: epub-audiobook
options:
  bundleIdPrefix: com.tigoss
  deploymentTarget:
    iOS: "17.4"
  xcodeVersion: "16.2"
  createIntermediateGroups: true
  defaultConfig: Debug

packages:
  ZIPFoundation:
    url: https://github.com/weichsel/ZIPFoundation
    from: "0.9.19"

targets:
  epub-audiobook:
    type: application
    platform: iOS
    sources:
      - path: epub-audiobook
    info:
      path: epub-audiobook/Info.plist
      properties:
        UIBackgroundModes:
          - audio
        UIFileSharingEnabled: true
        LSSupportsOpeningDocumentsInPlace: true
        CFBundleDocumentTypes:
          - CFBundleTypeName: EPUB Document
            CFBundleTypeRole: Viewer
            LSHandlerRank: Alternate
            LSItemContentTypes:
              - org.idpf.epub-container
    settings:
      base:
        MARKETING_VERSION: "0.1.0"
        CURRENT_PROJECT_VERSION: "1"
        SWIFT_VERSION: "6.0"
        PRODUCT_BUNDLE_IDENTIFIER: com.tigoss.epub-audiobook
        CODE_SIGN_STYLE: Automatic
        DEVELOPMENT_TEAM: GLVW6FZ3DS
    dependencies:
      - package: ZIPFoundation

  epub-audiobook-tests:
    type: bundle.unit-test
    platform: iOS
    sources:
      - path: epub-audiobook-tests
    settings:
      base:
        GENERATE_INFOPLIST_FILE: "YES"
        SWIFT_VERSION: "6.0"
    dependencies:
      - target: epub-audiobook
      - package: ZIPFoundation

  epub-audiobook-uitests:
    type: bundle.ui-testing
    platform: iOS
    sources:
      - path: epub-audiobook-uitests
    settings:
      base:
        GENERATE_INFOPLIST_FILE: "YES"
        SWIFT_VERSION: "6.0"
    dependencies:
      - target: epub-audiobook

schemes:
  epub-audiobook:
    build:
      targets:
        epub-audiobook: all
        epub-audiobook-tests: [test]
        epub-audiobook-uitests: [test]
    run:
      config: Debug
    test:
      config: Debug
      targets:
        - epub-audiobook-tests
        - epub-audiobook-uitests
    profile:
      config: Release
    analyze:
      config: Debug
    archive:
      config: Release
